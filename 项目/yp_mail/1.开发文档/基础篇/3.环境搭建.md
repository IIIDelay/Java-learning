### 1. 安装docker

> Docker 安装文档：[https://docs.docker.com/install/linux/docker-ce/centos/](https://docs.docker.com/install/linux/docker-ce/centos/)

1.1 卸载系统之前的docker

```bash
sudo yum remove docker \
docker-client \
docker-client-latest \
docker-common \
docker-latest \
docker-latest-logrotate \
docker-logrotate \
    docker-engine
```

1.2 安装Docker-CE

```bash
# 安装必须的依赖
sudo yum install -y yum-utils \
device-mapper-persistent-data \
lvm2

# 设置docker repo 的yum 位置
sudo yum-config-manager \
--add-repo \
https://download.docker.com/linux/centos/docker-ce.repo

# 安装docker，以及docker-cli
sudo yum install docker-ce docker-ce-cli containerd.io
```

1.3 启动docker

```bash
sudo systemctl start docker
```

14. 设置docker 开机自启

```bash
sudo systemctl enable docker
```

1.5 测试docker 常用命令，注意切换到root 用户下

```bash
https://docs.docker.com/engine/reference/commandline/docker/
```

1.6 配置docker 镜像加速

```bash
# 阿里云，容器镜像服务
# 针对Docker 客户端版本大于1.10.0 的用户
# 您可以通过修改daemon 配置文件/etc/docker/daemon.json 来使用加速器
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
"registry-mirrors": ["https://82m9ar63.mirror.aliyuncs.com"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

#### 1.7 mysql配置

```bash
vi /mydata/mysql/conf/my.cnf
[client]
default-character-set=utf8
[mysql]
default-character-set=utf8
[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
init_connect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_unicode_ci
skip-character-set-client-handshake
skip-name-resolve
```

> 注意：解决MySQL 连接慢的问题
> 在配置文件中加入如下，并重启mysql
> [mysqld]
> skip-name-resolve
> 解释：
> skip-name-resolve：跳过域名解析

#### 1.8 设置root远程访问

```bash
grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option;
flush privileges;
```

